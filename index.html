<!DOCTYPE html>
<html lang="en">
<head>
  <title>Firemap Google Maps Links</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
</head>
<body>

<!-- <button type="button"><a href="geo:0,0?q=41.0082,28.9784(Istanbul Point)">Open in Google Maps</a></button> -->

<!-- <button type="button" class=" btn-warning btn-lg btn-block"><a style="color:white" href="geo:0,0?q=41.0082,28.9784(Istanbul Point)">Open in Google Maps</a></button>
<button type="button" class=" btn-danger btn-lg btn-block"><a style="color:white" href="geo:0,0?q=42.0082,29.9784(Istanbul Point)">Open in Google Maps</a></button> -->

<!-- <button type="button" class=" btn-warning btn-lg btn-block" style="color:white" href="geo:0,0?q=41.0082,28.9784(Istanbul Point)">Open in Google Maps</button> -->

<!-- <ul id="buttonList">
  <button type="button" class=" btn-warning btn-lg btn-block"><a style="color:white" href="geo:0,0?q=41.0082,28.9784(Istanbul Point)">Open in Google Maps</a></button>
  <button type="button" class=" btn-danger btn-lg btn-block"><a style="color:white" href="geo:0,0?q=42.0082,29.9784(Istanbul Point)">Open in Google Maps</a></button>


</ul> -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script>

//////////////////////////////////////////////////////////////////////////////////////////////
var realurl = "https://raw.githubusercontent.com/Zia-/Zia-.github.io/master/firemap_data/realfire0.geojson";
////////////// To have a static url just delete the following section, and update above url accordingly
var tester = 0;
function mytester() {
  switch (tester){
    case 0:
      realurl = "https://raw.githubusercontent.com/Zia-/Zia-.github.io/master/firemap_data/realfire1.geojson";
      tester = 1;
      break;
    case 1:
      realurl = "https://raw.githubusercontent.com/Zia-/Zia-.github.io/master/firemap_data/realfire2.geojson";
      tester = 2;
      break;
    case 2:
      realurl = "https://raw.githubusercontent.com/Zia-/Zia-.github.io/master/firemap_data/realfire0.geojson";
      tester = 0;
      break;
  }
};
var geojsontester = setInterval(mytester, 10000);
//////////////////////////////////////////////////////////////////////////////////////////////



function getjsonfunc(){
  $.getJSON( realurl, function( json ) {
  // console.log( "JSON Data: " + json.features.length );
  // console.log(document.body.childNodes.length);
  // console.log(document.getElementById("buttonList").childNodes.length);

  // Following one line code is sorting features based on FRP value,
  // so that danger button will be at the top and success at the bottom
  json.features.sort(function(a,b) {return (a.properties.FRP < b.properties.FRP)});

  // Remove all button after every url load
  while (document.body.firstChild) {
    document.body.removeChild(document.body.firstChild);
  }

  for (i=0; i<json.features.length; ++i){
    var btn = document.createElement("button");
    btn.setAttribute('type','button');

    // Following code block is handeling button color
    var buttonColorClass = '';
    var frp_value = json.features[i].properties.FRP
    if (frp_value <= 30){buttonColorClass += 'btn-success btn-lg btn-block'}
    else if (frp_value > 30 && frp_value <= 40){buttonColorClass += 'btn-success btn-lg btn-block'}
    else if (frp_value > 40 && frp_value <= 60){buttonColorClass += 'btn-info btn-lg btn-block'}
    else if (frp_value > 60 && frp_value <= 80){buttonColorClass += 'btn-primary btn-lg btn-block'}
    else if (frp_value > 80 && frp_value <= 120){buttonColorClass += 'btn-warning btn-lg btn-block'}
    else if (frp_value > 120){buttonColorClass += 'btn-danger btn-lg btn-block'}

    btn.setAttribute('class', buttonColorClass);
    var aTag = document.createElement("a");
    aTag.setAttribute('style', 'color:white');
    // text-shadow: 1px 0 0 #000, 0 -1px 0 #000, 0 1px 0 #000, -1px 0 0 #000;
    // aTag.setAttribute('style', 'text-shadow: 1px 0 0 black! important, 0 -1px 0 black! important, 0 1px 0 black! important, -1px 0 0 black! important');
    var href = 'geo:0,0?q=' + json.features[i].geometry.coordinates[1] + ',' + json.features[i].geometry.coordinates[0] + '(' + json.features[i].properties.TIME + ')';
    aTag.setAttribute('href', href);
    var labelTxt = "Location " + (i+1);
    var label = document.createTextNode(labelTxt);
    aTag.appendChild(label);
    btn.appendChild(aTag);
    document.body.appendChild(btn);
  }











  // var btn = document.createElement("button");
  // btn.setAttribute('type','button');
  // btn.setAttribute('class', 'btn-warning btn-lg btn-block')
  // var aTag = document.createElement("a");
  // aTag.setAttribute('style', 'color:white');
  // aTag.setAttribute('href', 'geo:0,0?q=41.0082,28.9784(Istanbul Point)');
  // var label = document.createTextNode("CLICK ME");
  // aTag.appendChild(label);
  // btn.appendChild(aTag);
  // document.body.appendChild(btn);




  });
}
var dataUploadOnce = getjsonfunc();

// function myTimer() {
//   $.getJSON( realurl, function( json ) {
//   console.log( "JSON Data: " + json.features.length );
//   });
// }
var dataUpload = setInterval(getjsonfunc, 10000);


// $.getJSON( realurl, function( json ) {
// console.log( "JSON Data: " + json.features.length );
// });
</script>

</body>
</html>
